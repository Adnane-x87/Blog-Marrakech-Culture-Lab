<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Approve Events - Admin Panel</title>
    <meta name="description" content="Review and approve pending cultural event submissions for the Marrakech Cultural Scene platform.">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Admin Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-indigo">
        <div class="container-fluid">
            <a class="navbar-brand" href="admin-dashboard.html">
                <i class="fas fa-cog me-2"></i>
                Admin Panel - Marrakech Cultural Scene
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#adminNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="adminNavbar">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="admin-dashboard.html">
                            <i class="fas fa-chart-pie me-1"></i>Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="admin-events.html">
                            <i class="fas fa-calendar-alt me-1"></i>Manage Events
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="admin-approve.html">
                            <i class="fas fa-check-circle me-1"></i>Approve Events
                            <span class="badge bg-terracotta ms-1">5</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="admin-delete.html">
                            <i class="fas fa-trash me-1"></i>Remove Events
                        </a>
                    </li>
                </ul>
                
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="adminUserDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user-circle me-1"></i>Admin User
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Profile Settings</a></li>
                            <li><a class="dropdown-item" href="#">System Settings</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="index.html">View Public Site</a></li>
                            <li><a class="dropdown-item" href="#">Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Admin Header -->
    <div class="admin-header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1>Event Approval Queue</h1>
                    <p class="mb-0">Review and approve pending cultural event submissions</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <div class="approval-stats">
                        <small class="text-white-50">Today: 3 approved • 1 rejected • 5 pending</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Approval Content -->
    <div class="container-fluid py-4">
        <!-- Review Guidelines -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="alert alert-info">
                    <h6 class="alert-heading">
                        <i class="fas fa-info-circle me-2"></i>Review Guidelines
                    </h6>
                    <div class="row">
                        <div class="col-md-4">
                            <ul class="mb-0 small">
                                <li>Verify cultural relevance and authenticity</li>
                                <li>Check venue and date information accuracy</li>
                                <li>Ensure appropriate content and descriptions</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <ul class="mb-0 small">
                                <li>Validate organizer credentials and contact info</li>
                                <li>Review image quality and appropriateness</li>
                                <li>Check for duplicate or similar events</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <ul class="mb-0 small">
                                <li>Confirm compliance with community guidelines</li>
                                <li>Assess educational and cultural value</li>
                                <li>Verify pricing and accessibility information</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pending Events for Review -->
        <div class="row">
            <!-- Event 1 - Berber Carpet Weaving Workshop -->
            <div class="col-12 mb-4">
                <div class="admin-content">
                    <div class="approval-card">
                        <div class="row">
                            <div class="col-md-4">
                                <img src="images/cultural_workshop_7.jpg" alt="Berber Carpet Weaving Workshop" class="img-fluid rounded">
                                <div class="mt-2 text-center">
                                    <small class="text-muted">Submitted: 2 hours ago</small>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h4>Berber Carpet Weaving Workshop</h4>
                                        <span class="badge bg-terracotta">Workshop</span>
                                        <span class="badge bg-warning ms-2">Pending Review</span>
                                    </div>
                                    <div class="priority-indicator">
                                        <span class="badge bg-success">High Priority</span>
                                    </div>
                                </div>
                                
                                <div class="event-details mb-3">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <p><strong>Date:</strong> January 15, 2025 - 10:00 AM</p>
                                            <p><strong>Venue:</strong> Traditional Crafts Center, Medina</p>
                                            <p><strong>Organizer:</strong> Artisan Guild Marrakech</p>
                                            <p><strong>Contact:</strong> guild@artisans-marrakech.ma</p>
                                        </div>
                                        <div class="col-md-6">
                                            <p><strong>Category:</strong> Traditional Crafts Workshop</p>
                                            <p><strong>Capacity:</strong> 12 participants</p>
                                            <p><strong>Price:</strong> 150 MAD per person</p>
                                            <p><strong>Language:</strong> Arabic, French, English</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="event-description mb-3">
                                    <h6>Description:</h6>
                                    <p class="text-muted">Discover the intricate art of traditional Berber carpet weaving with authentic techniques passed down through generations of mountain artisans. This hands-on workshop will teach participants the fundamentals of geometric pattern creation, wool preparation, and traditional dyeing methods using natural materials.</p>
                                </div>
                                
                                <div class="review-checklist mb-3">
                                    <h6>Review Checklist:</h6>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="cultural-relevance-1" checked>
                                                <label class="form-check-label" for="cultural-relevance-1">
                                                    Cultural relevance verified
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="venue-info-1" checked>
                                                <label class="form-check-label" for="venue-info-1">
                                                    Venue information accurate
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="organizer-verified-1" checked>
                                                <label class="form-check-label" for="organizer-verified-1">
                                                    Organizer credentials verified
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="content-appropriate-1" checked>
                                                <label class="form-check-label" for="content-appropriate-1">
                                                    Content appropriate
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="image-quality-1" checked>
                                                <label class="form-check-label" for="image-quality-1">
                                                    Image quality acceptable
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="guidelines-compliant-1">
                                                <label class="form-check-label" for="guidelines-compliant-1">
                                                    Guidelines compliant
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="approval-actions">
                                    <form class="d-inline" data-form-type="admin-approval">
                                        <input type="hidden" name="event_id" value="workshop-001">
                                        <input type="hidden" name="action" value="approve">
                                        <button type="submit" class="btn btn-success me-2">
                                            <i class="fas fa-check me-2"></i>Approve Event
                                        </button>
                                    </form>
                                    
                                    <button class="btn btn-outline-warning me-2" data-bs-toggle="modal" data-bs-target="#requestChangesModal" data-event-id="workshop-001">
                                        <i class="fas fa-edit me-2"></i>Request Changes
                                    </button>
                                    
                                    <form class="d-inline" data-form-type="admin-approval">
                                        <input type="hidden" name="event_id" value="workshop-001">
                                        <input type="hidden" name="action" value="reject">
                                        <button type="submit" class="btn btn-outline-danger">
                                            <i class="fas fa-times me-2"></i>Reject Event
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Event 2 - Jazz Fusion Concert -->
            <div class="col-12 mb-4">
                <div class="admin-content">
                    <div class="approval-card">
                        <div class="row">
                            <div class="col-md-4">
                                <img src="images/theater_performance_7.jpg" alt="Jazz Fusion Concert" class="img-fluid rounded">
                                <div class="mt-2 text-center">
                                    <small class="text-muted">Submitted: 4 hours ago</small>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h4>Morocco Meets Jazz Fusion Concert</h4>
                                        <span class="badge bg-ochre">Music</span>
                                        <span class="badge bg-warning ms-2">Pending Review</span>
                                    </div>
                                    <div class="priority-indicator">
                                        <span class="badge bg-info">Standard Priority</span>
                                    </div>
                                </div>
                                
                                <div class="event-details mb-3">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <p><strong>Date:</strong> February 10, 2025 - 7:30 PM</p>
                                            <p><strong>Venue:</strong> Modern Arts Center, Gueliz</p>
                                            <p><strong>Organizer:</strong> Jazz Collective Marrakech</p>
                                            <p><strong>Contact:</strong> contact@jazzmarrakech.com</p>
                                        </div>
                                        <div class="col-md-6">
                                            <p><strong>Category:</strong> Contemporary Fusion Music</p>
                                            <p><strong>Capacity:</strong> 200 seats</p>
                                            <p><strong>Price:</strong> 120 MAD per person</p>
                                            <p><strong>Language:</strong> Multilingual performance</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="event-description mb-3">
                                    <h6>Description:</h6>
                                    <p class="text-muted">An innovative fusion performance blending traditional Moroccan instruments with contemporary jazz, creating a unique musical dialogue between cultures. Features renowned oud player Mahmoud El Fassi and international jazz saxophonist Maria Rodriguez.</p>
                                </div>
                                
                                <div class="review-notes mb-3">
                                    <h6>Review Notes:</h6>
                                    <div class="alert alert-warning">
                                        <small><strong>Pending:</strong> Need to verify international artist credentials and work permits.</small>
                                    </div>
                                </div>
                                
                                <div class="approval-actions">
                                    <button class="btn btn-outline-success me-2" disabled>
                                        <i class="fas fa-check me-2"></i>Approve Event
                                    </button>
                                    
                                    <button class="btn btn-warning me-2" data-bs-toggle="modal" data-bs-target="#requestChangesModal" data-event-id="music-002">
                                        <i class="fas fa-edit me-2"></i>Request Changes
                                    </button>
                                    
                                    <button class="btn btn-outline-danger">
                                        <i class="fas fa-times me-2"></i>Reject Event
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Event 3 - Calligraphy Exhibition -->
            <div class="col-12 mb-4">
                <div class="admin-content">
                    <div class="approval-card">
                        <div class="row">
                            <div class="col-md-4">
                                <img src="images/art_exhibition_3.jpg" alt="Arabic Calligraphy Exhibition" class="img-fluid rounded">
                                <div class="mt-2 text-center">
                                    <small class="text-muted">Submitted: 1 day ago</small>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="d-flex justify-content-between align-items-start mb-3">
                                    <div>
                                        <h4>The Art of Arabic Calligraphy</h4>
                                        <span class="badge bg-indigo">Exhibition</span>
                                        <span class="badge bg-warning ms-2">Pending Review</span>
                                    </div>
                                    <div class="priority-indicator">
                                        <span class="badge bg-success">High Priority</span>
                                    </div>
                                </div>
                                
                                <div class="event-details mb-3">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <p><strong>Date:</strong> February 1, 2025 - 5:00 PM</p>
                                            <p><strong>Venue:</strong> Heritage Gallery, Medina</p>
                                            <p><strong>Organizer:</strong> Calligraphy Masters Society</p>
                                            <p><strong>Contact:</strong> masters@calligraphy-morocco.org</p>
                                        </div>
                                        <div class="col-md-6">
                                            <p><strong>Category:</strong> Traditional Art Exhibition</p>
                                            <p><strong>Duration:</strong> 3 weeks</p>
                                            <p><strong>Price:</strong> Free Entry</p>
                                            <p><strong>Language:</strong> Arabic, French</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="event-description mb-3">
                                    <h6>Description:</h6>
                                    <p class="text-muted">Explore the magnificent world of Arabic calligraphy through works by master calligraphers from Morocco and the Islamic world. The exhibition features traditional Quranic verses, poetry, and contemporary interpretations of this sacred art form.</p>
                                </div>
                                
                                <div class="approval-actions">
                                    <form class="d-inline" data-form-type="admin-approval">
                                        <input type="hidden" name="event_id" value="exhibition-003">
                                        <input type="hidden" name="action" value="approve">
                                        <button type="submit" class="btn btn-success me-2">
                                            <i class="fas fa-check me-2"></i>Approve Event
                                        </button>
                                    </form>
                                    
                                    <button class="btn btn-outline-warning me-2" data-bs-toggle="modal" data-bs-target="#requestChangesModal" data-event-id="exhibition-003">
                                        <i class="fas fa-edit me-2"></i>Request Changes
                                    </button>
                                    
                                    <form class="d-inline" data-form-type="admin-approval">
                                        <input type="hidden" name="event_id" value="exhibition-003">
                                        <input type="hidden" name="action" value="reject">
                                        <button type="submit" class="btn btn-outline-danger">
                                            <i class="fas fa-times me-2"></i>Reject Event
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Approval Summary -->
        <div class="row">
            <div class="col-12">
                <div class="admin-content">
                    <h5 class="mb-3">Approval Summary</h5>
                    <div class="row">
                        <div class="col-md-3 text-center">
                            <h3 class="text-warning">5</h3>
                            <p class="text-muted">Pending Review</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <h3 class="text-success">18</h3>
                            <p class="text-muted">Approved This Week</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <h3 class="text-danger">2</h3>
                            <p class="text-muted">Rejected This Week</p>
                        </div>
                        <div class="col-md-3 text-center">
                            <h3 class="text-info">3</h3>
                            <p class="text-muted">Changes Requested</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Request Changes Modal -->
    <div class="modal fade" id="requestChangesModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Request Changes</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="requestChangesForm">
                        <input type="hidden" id="changeEventId" name="event_id">
                        
                        <div class="mb-3">
                            <label for="changeCategory" class="form-label">Change Category</label>
                            <select class="form-select" id="changeCategory" name="change_category">
                                <option value="">Select category</option>
                                <option value="content">Content & Description</option>
                                <option value="venue">Venue Information</option>
                                <option value="date">Date & Time</option>
                                <option value="images">Images & Media</option>
                                <option value="organizer">Organizer Information</option>
                                <option value="pricing">Pricing & Ticketing</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="changeDetails" class="form-label">Requested Changes</label>
                            <textarea class="form-control" id="changeDetails" name="change_details" rows="4" placeholder="Please describe the specific changes needed for approval..."></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="changePriority" class="form-label">Priority</label>
                            <select class="form-select" id="changePriority" name="priority">
                                <option value="low">Low - Minor adjustments needed</option>
                                <option value="medium" selected>Medium - Moderate changes required</option>
                                <option value="high">High - Significant issues to address</option>
                            </select>
                        </div>
                        
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="notifyOrganizer" name="notify_organizer" checked>
                            <label class="form-check-label" for="notifyOrganizer">
                                Send email notification to organizer
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning" onclick="submitChangeRequest()">Send Change Request</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JavaScript -->
    <script src="js/main.js"></script>
    
    <script>
        // Approval page specific JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Set up event ID for change request modal
            const requestChangesButtons = document.querySelectorAll('[data-bs-target="#requestChangesModal"]');
            requestChangesButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const eventId = this.getAttribute('data-event-id');
                    document.getElementById('changeEventId').value = eventId;
                });
            });
        });
        
        function submitChangeRequest() {
            const form = document.getElementById('requestChangesForm');
            const formData = new FormData(form);
            
            if (!formData.get('change_details').trim()) {
                alert('Please provide details about the requested changes.');
                return;
            }
            
            // Implementation for submitting change request
            console.log('Submitting change request:', Object.fromEntries(formData));
            
            const modal = bootstrap.Modal.getInstance(document.getElementById('requestChangesModal'));
            modal.hide();
            
            showSuccessMessage('Change request sent to organizer successfully!');
        }
    </script>
    
    <style>
        .approval-card {
            border: 1px solid var(--border-light);
            border-radius: 10px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .approval-card:hover {
            box-shadow: 0 5px 15px var(--shadow-medium);
        }
        
        .priority-indicator .badge {
            font-size: 0.75rem;
        }
        
        .review-checklist .form-check {
            margin-bottom: 0.5rem;
        }
        
        .approval-actions {
            border-top: 1px solid var(--border-light);
            padding-top: 1rem;
            margin-top: 1rem;
        }
    </style>
</body>
</html>